<?xml version="1.0" encoding="iso-8859-1" ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<!--http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd-->  
<html xml:lang="de" xmlns="http://www.w3.org/1999/xhtml"  
> 
<head> <title>BCDWristWatch</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<meta name="originator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<!-- html,xhtml --> 
<meta name="src" content="Story.tex" /> 
<link rel="stylesheet" type="text/css" href="Story.css" /> 
</head><body 
>
   <div class="maketitle">
                                                                                            
                                                                                            
                                                                                            
                                                                                            

<h2 class="titleHead">BCDWristWatch</h2>
<div class="author" ><span 
class="ec-lmr-12x-x-120">SulKith</span></div><br />
<div class="date" ></div>   </div>
<div class="center" 
>
<!--l. 23--><p class="noindent" >
</p><!--l. 24--><p class="noindent" ><img 
src="../Pictures/AnalogClock.jpg" alt="pict"  
 width="483.69687pt.5"  /></p></div>
<!--l. 1--><p class="indent" >
                                                                                            
                                                                                            
</p>
   <h3 class="sectionHead"><span class="titlemark">1   </span> <a 
 id="x1-10001"></a>Binary Watch</h3>
<!--l. 3--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">1.1   </span> <a 
 id="x1-20001.1"></a>PCB</h4>
<!--l. 4--><p class="noindent" >
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">1.1.1   </span> <a 
 id="x1-30001.1.1"></a>First PCB Version</h5>
<!--l. 5--><p class="noindent" >The First PCB Version was a desaster. The PCBs arrived very fast, but the QFN Package had the
wrong size. ATMEL only produces QFN32 in 7x7mm. Therefore the design of the PCB hat to be
changed to the smaller package, but that gave me the Chance to shrink the Design to a smaller form
factor. The part which keeps the PCB from getting smaller is the Coin Cell Battery (CR2032). On the
PCBs there was the order number printed on the Front side, which would be visble in the final
assembly.
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">1.1.2   </span> <a 
 id="x1-40001.1.2"></a>Second PCB Version</h5>
<!--l. 12--><p class="noindent" >The second PCB Version was designed from scratch. But the Front was the side with the Battery, so
hopefully the Order Number would not be printed on the visible side of the PCB. This worked out
very well for the second Version of the PCBs.
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">1.1.3   </span> <a 
 id="x1-50001.1.3"></a>PCB1</h5>
<!--l. 15--><p class="noindent" >since the PCBs finally arrived. it was possible to assemble all the parts. The first PCB was assembled
with some Cables soldered to the Testpins on the Backside of the Board. And the Battery case
was also not assembled. Here is a Picture of the uncleaned but already soldered PCB
</p>
<div class="center" 
>
<!--l. 19--><p class="noindent" >
</p><!--l. 20--><p class="noindent" ><img 
src="../Pictures/PCB1_F1.jpg" alt="pict"  
 width="241.84843pt.5"  /></p></div>
<!--l. 23--><p class="noindent" >
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">1.1.4   </span> <a 
 id="x1-60001.1.4"></a>PCB2</h5>
<!--l. 24--><p class="noindent" >The PCB2 was assembled and cleaned as a First Prototype with the Housing.&#x00A0;Here aretwo Pictures of
the PCB one without the LEDs turned on and one with the LEDs turned on.&#x00A0;Brightness
was set in the Program to 100/255 (see software void showLEDs, constant perc=100)
</p>
                                                                                            
                                                                                            
<div class="center" 
>
<!--l. 27--><p class="noindent" >
</p><!--l. 28--><p class="noindent" ><img 
src="../Pictures/PCB2_F1_off.jpg" alt="pict"  
 width="217.66211pt.5"  /> <img 
src="../Pictures/PCB2_F1_on.jpg" alt="pict"  
 width="217.66211pt.5"  />
</p>
</div>
<!--l. 32--><p class="noindent" >
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">1.1.5   </span> <a 
 id="x1-70001.1.5"></a>PCB3</h5>
<!--l. 33--><p class="noindent" >The third PCB was ordered at <a 
href="https://aisler.net" >aisler.net</a>. It only took around one and a half week to
arrive(to Germany).&#x00A0;The PCB was not completely milled out. It was in a carrier PCB
with rectangular shape, but it was easy to remove.&#x00A0;I had to sand the edges a bit, since
it was a bit rough on the parts where i removed the connections to the carrier, since i
had to sand the PCB anyway to fit in the Housing that was no big problem.&#x00A0;The overall
Quality of the PCBs is very good, but you can not choose the thicknes or color of the
PCB.&#x00A0;</p>
<div class="center" 
>
<!--l. 37--><p class="noindent" >
</p><!--l. 38--><p class="noindent" ><img 
src="../Pictures/PCB3.jpg" alt="pict"  
 width="241.84843pt.5"  /></p></div>
<!--l. 41--><p class="indent" >
                                                                                            
                                                                                            
</p>
   <h4 class="subsectionHead"><span class="titlemark">1.2   </span> <a 
 id="x1-80001.2"></a>Housing</h4>
<!--l. 44--><p class="noindent" >The Housing was designed in OpenSCAD.&#x00A0;a very helpfull reference for the OpenSCAD syntax
was&#x00A0;<a 
href="https://en.wikibooks.org/wiki/OpenSCAD_User_Manual/Transformations" class="url" ><span 
class="ec-lmtt-12">https://en.wikibooks.org/wiki/OpenSCAD_User_Manual/Transformations</span></a>
</p><!--l. 48--><p class="noindent" >
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">1.2.1   </span> <a 
 id="x1-90001.2.1"></a>Housing 1</h5>
<!--l. 49--><p class="noindent" >The Housing was printed by the TOOM Printing Service as SLS in PLA.&#x00A0;Sadly all the surfaces are
not really smooth, therefore the Buttons are working very bad.&#x00A0;I tried to glue in the glass with
superglue, but the glue dried out white, this looks really bad :-(&#x00A0;
</p><!--l. 53--><p class="noindent" >
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">1.2.2   </span> <a 
 id="x1-100001.2.2"></a>Plans for Housing 2</h5>
<!--l. 54--><p class="noindent" >The next housing should be produced via SLA with transparent Resin, so no glass for Protection is
needed, since the resin could be used.
</p>
<!--l. 56--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-110001.2.2"></a><span 
class="ec-lmbx-12">Problems while printing with SLA</span></span>
   It turns out, that there is no completely transparent Resin available. All of them get a yellow color
sooner or later. So it is not really beautiful as a glass.
</p><!--l. 60--><p class="noindent" >
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">1.2.3   </span> <a 
 id="x1-120001.2.3"></a>Housing 2</h5>
<!--l. 61--><p class="noindent" >A friend told me that most of the time the resin will not reflect light equally in every spot, therefore i
decided to order a PCB without glass and do the mounting of the glass with very tight tolerances and
a rim on the top edge.&#x00A0;this worked out extremely well.&#x00A0;Another goal was to make the second Housing
slim, because the first one was very bulky. With a bit of optimization is was possible to integrate the
bottom plate completely in the housing. The overall thicknes was reduced from about 15mm to
9.4mm with the 1mm PCB or 10mm with the new 1.6mm PCB.&#x00A0;For the PCB to tightly fit in
either the Housing has to get some aditional holes or at least the Battery clip has to be
modified.&#x00A0;</p>
<div class="center" 
>
<!--l. 65--><p class="noindent" >
</p><!--l. 66--><p class="noindent" ><img 
src="../Pictures/Housing2.jpg" alt="pict"  
 width="217.66211pt.5"  /> <img 
src="../Pictures/Housing3b.jpg" alt="pict"  
 width="217.66211pt.5"  /></p></div>
<!--l. 69--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">1.3   </span> <a 
 id="x1-130001.3"></a>Problems</h4>
                                                                                            
                                                                                            
<!--l. 70--><p class="noindent" >
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">1.3.1   </span> <a 
 id="x1-140001.3.1"></a>Sweat is entering the Housing</h5>
<!--l. 71--><p class="noindent" >The first watch broke down after nearly 1 year. After opening the Housing the Problem was very
obvious. Sweat was entering the Housing and corroded the PCB and the mounted parts.
</p>
<div class="center" 
>
<!--l. 72--><p class="noindent" >
</p><!--l. 73--><p class="noindent" ><img 
src="../Pictures/ProbCorr1.jpg" alt="pict"  
 width="241.84843pt.5"  /></p></div>
<!--l. 75--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-150001.3.1"></a><span 
class="ec-lmbx-12">Cleaning the PCB and adding something to absorb the moisture</span></span>
   As a solution i tried to clean the PCB with Isopropanol and glued some rice to the PCB to absorb
the moisture, that helped only for about a week and the Watch stopped working again. So that is not
the best solution, but is is an extraordinary try ;-) </p>
<div class="center" 
>
<!--l. 77--><p class="noindent" >
</p><!--l. 78--><p class="noindent" ><img 
src="../Pictures/ProbCorrSol1.jpg" alt="pict"  
 width="241.84843pt.5"  /></p></div>
<!--l. 80--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-160001.3.1"></a><span 
class="ec-lmbx-12">adding isolation Tape between the lid and the housing</span></span>
   The second solution was to add Tape, which is originally designed to be used to seal threads,
between the housing and the lid.&#x00A0;That worked out a little bit better, but the Watch also stopped
working after a few weeks.
</p>
<!--l. 83--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-170001.3.1"></a><span 
class="ec-lmbx-12">Analyzing the Watch again</span></span>
   After analyzing it again the PCB seemd to be ok. The PCB was only a little damaged from the
first sweat attack. The Problem was that the time stopped to run, but another point was that the
LEDs wont go off anymore. But it was possible to set the time. So the conclusion is that the clock
which is run by the crystal stopped running.
</p>
<!--l. 88--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-180001.3.1"></a><span 
class="ec-lmbx-12">Adding clear Nailpolish to guard the Crystal</span></span>
   The next attempted solution was to add clear Nailpolish to the PCB, so the crystal is completely
covered. This is an attempt to stop moisture from crawling below the crystal and stopping the
clock.
</p><!--l. 91--><p class="indent" >   Adding Nailpolish was also not the real solution. The Clock also stopped to work after a few
weeks.
</p>
<!--l. 93--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-190001.3.1"></a><span 
class="ec-lmbx-12">commercial products to insulate PCBs</span></span>
   The next attempt will be to use a commercial Product to insulate the PCB. For this i will try
<a 
href="https://www.reichelt.de/korrosionsschutzlack-plastik-70-super-400-ml-isolierlack-kontakt-32046-p125737.html" >Plastik 70 Super</a> from Kontakchemie.
                                                                                            
                                                                                            
</p><!--l. 98--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">1.4   </span> <a 
 id="x1-200001.4"></a>Manual</h4>
<!--l. 99--><p class="noindent" >
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">1.4.1   </span> <a 
 id="x1-210001.4.1"></a>How to read the Watch</h5>
<!--l. 100--><p class="noindent" >The time is displayed in BCD Code. For further reference please see the Picture below:
</p>
<div class="center" 
>
<!--l. 101--><p class="noindent" >
</p><!--l. 102--><p class="noindent" ><img 
src="drawings/BinDia1359.png" alt="pict"  
 width="241.84843pt"  /> </p></div>
<!--l. 105--><p class="noindent" >There are Two Buttons on the Watch: </p>
      <ul class="itemize1">
      <li class="itemize">BL: left Button
      </li>
      <li class="itemize">BR: right Button</li></ul>
<!--l. 110--><p class="noindent" >To read the Watch it is necessary to activate the Display via one of the Buttons
</p><!--l. 112--><p class="indent" >   The LEDs are read columnwise. So the right two columns are showing the Minutes. If an LED is
litone have to add its Value to the Minutes if not then nothing is added. So for the full hour no led in
the right two columns will be lit.
</p><!--l. 114--><p class="indent" >   In the Example above the following LEDs are lit: M40, M10, M08 and M01. The sum of all the
values is the current minute value <span 
class="rm-lmr-12">40 + 10 + 8 + 1 = 59</span>
</p><!--l. 117--><p class="indent" >   The Hours are displayed exactly like the Minutes. For the hours the 24 Hour Format is used. In
the Example above the following LEDs are lit: H10, H01, H02. The current Hour Value is also
determined by summing everythin up: <span 
class="rm-lmr-12">10 + 1 + 2 = 13</span>.
</p><!--l. 119--><p class="indent" >   So the current Time in the example is 13:59. If it is 0:00 the watch will display 24:00 to make sure
0:00 is not confused with a broken watch.
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">1.4.2   </span> <a 
 id="x1-220001.4.2"></a>set the time</h5>
<!--l. 121--><p class="noindent" >To set the time first of all the display has to be activated, afterwards both buttons have to be released
(to make sure that the setup mode is not accessed accidently). Now both buttons have to be pressed.
Now the LED H80 lights up, to signalize that now it is in set hour mode. Now Both buttons can be
released again.
</p><!--l. 123--><p class="indent" >   To switch to the set minute mode the right button has to be pressed. In set minute mode the right
button switches back to the normal mode.
</p><!--l. 125--><p class="indent" >   With the right button the value which is set currently can be incremented. The hour will not be
incremented wen incrementing the minutes from 59 to 0.
</p><!--l. 128--><p class="indent" >   Both setup modes will timeout if no button is pressed for 30 seconds. While the watch is in setup
mode the clock will be stopped, after returning to normal mode the seconds will start from 0 so it is
easy to set the time precisely.
</p><!--l. 1--><p class="indent" >
                                                                                            
                                                                                            
</p>
   <h3 class="sectionHead"><span class="titlemark">2   </span> <a 
 id="x1-230002"></a>Analog Watch</h3>
<!--l. 3--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">2.1   </span> <a 
 id="x1-240002.1"></a>PCB</h4>
<!--l. 4--><p class="noindent" >After the PCBs for the BCD Version were working, i also created an analog Version, so i dont have to
explain the Clock everytime ;-)
</p><!--l. 6--><p class="indent" >   The Analog Watch features the same Schematics for the basic clock functionality, but the display
is done via Charlieplexing the LEDs. There are 4 Clustes with 4 Pins which drive all the 42 LEDs. 12
LEDs on the inner ring are displaying the hours. On the outer ring 30 LEDs display the Minutes.
Since it was not possible to fit 60 LEDs on the outer ring, uneven numbers are shown while lighting
up the two neighbouring LEDs. </p>
<div class="center" 
>
<!--l. 7--><p class="noindent" >
</p><!--l. 8--><p class="noindent" ><img 
src="../Pictures/AnalogPCB.jpg" alt="pict"  
 width="241.84843pt.5"  /></p></div>
<!--l. 10--><p class="noindent" >
                                                                                            
                                                                                            
</p>
   <h4 class="subsectionHead"><span class="titlemark">2.2   </span> <a 
 id="x1-250002.2"></a>Housing</h4>
<!--l. 13--><p class="noindent" >The PCB for the analog Version is designed with the same mechanical Interface as the Binary Version
therefore the Housing from the Binary Version can be used.
</p><!--l. 15--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">2.3   </span> <a 
 id="x1-260002.3"></a>first Watch which i gave away</h4>
<!--l. 16--><p class="noindent" >The first Watch i gave away was one of the analog PCB ones i built for my dads birthday. for this
Watch i replaced all the resistors for the LEDs with Zero <span 
class="rm-lmr-12">&#x03A9; </span>resistors, so the LEDs got more bright
and are clearly readable also in the sunlight. </p>
<div class="center" 
>
<!--l. 18--><p class="noindent" >
</p><!--l. 19--><p class="noindent" ><img 
src="../Pictures/AnalogWatch1.jpg" alt="pict"  
 width="338.58632pt.5"  /></p></div>
<!--l. 1--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">3   </span> <a 
 id="x1-270003"></a>BinaryGWatch</h3>
<!--l. 2--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">3.1   </span> <a 
 id="x1-280003.1"></a>PCB</h4>
<!--l. 3--><p class="noindent" >The PCB is based on the Binary Watch. Even the Buttons would still work if soldered on the board.
Additionally to the original Schematics there is a Bosch BMA456 connected to the SPI, which is
already on the back of the PCB to enable programming via Pogo Pins. Additionally there is also the
Chip select pin used and two interrupt pins to enable the wakeup functionality via the BMA
sensor.
</p><!--l. 5--><p class="indent" >   The SPI interface was chosen, to keep thepower consumption low, since SPI compared to I2C
doesn&#8217;t need PullUp Resistors.
</p><!--l. 7--><p class="indent" >   The BMA Sensor is mounted on the back of the PCB to keep the symetric watch face.
</p><!--l. 9--><p class="indent" >   The concept is to use the BMA Sensor also as interface. To enable the Display and also to set the
time. So no buttons will be needed this should also enable a housing without holes to
keep sweat from crawling into and solve the corroded PCB problems I had with the first
BinaryWatch
</p>
   <h4 class="subsectionHead"><span class="titlemark">3.2   </span> <a 
 id="x1-290003.2"></a>Software</h4>
<!--l. 11--><p class="noindent" >For interfacing with the BMA i use my own <a 
href="https://github.com/sulkith/Bosch_BMA456" >Bosch_BMA456</a> with an additional SPI-adapter.
</p><!--l. 13--><p class="indent" >   The Software still has the ability to work with Buttons, but since the BMA is working
really well there is no point in using th buttons. and risking that sweat will enter the
housing.
                                                                                            
                                                                                            
</p>
   <h4 class="subsectionHead"><span class="titlemark">3.3   </span> <a 
 id="x1-300003.3"></a>Housing</h4>
<!--l. 15--><p class="noindent" >Adapting the housing was very easy, just remove the holes for the buttons. A little smoothing was
done afterwards, because there were some thickened walls around the holes, where the Buttons were
mounted.
</p>
   <h4 class="subsectionHead"><span class="titlemark">3.4   </span> <a 
 id="x1-310003.4"></a>Manual</h4>
<!--l. 18--><p class="noindent" >
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">3.4.1   </span> <a 
 id="x1-320003.4.1"></a>How to read the Watch</h5>
<!--l. 19--><p class="noindent" >The time is displayed in BCD Code. For further reference please see the Picture below:
</p>
<div class="center" 
>
<!--l. 20--><p class="noindent" >
</p><!--l. 21--><p class="noindent" ><img 
src="drawings/BinDia1359.png" alt="pict"  
 width="241.84843pt"  /> </p></div>
<!--l. 24--><p class="noindent" >To read the Watch it is necessary to activate the Display this can be either done via double tapping the
Housing or raising the arm to take a look on the watch(tilt it by a minimum of 12 degrees with the
Watchface facing up and holding it steady for about one second)
</p><!--l. 26--><p class="indent" >   The LEDs are read columnwise. So the right two columns are showing the Minutes. If an LED is
litone have to add its Value to the Minutes if not then nothing is added. So for the full hour no led in
the right two columns will be lit.
</p><!--l. 28--><p class="indent" >   In the Example above the following LEDs are lit: M40, M10, M08 and M01. The sum of all the
values is the current minute value <span 
class="rm-lmr-12">40 + 10 + 8 + 1 = 59</span>
</p><!--l. 31--><p class="indent" >   The Hours are displayed exactly like the Minutes. For the hours the 24 Hour Format is used. In
the Example above the following LEDs are lit: H10, H01, H02. The current Hour Value is also
determined by summing everythin up: <span 
class="rm-lmr-12">10 + 1 + 2 = 13</span>.
</p><!--l. 33--><p class="indent" >   So the current Time in the example is 13:59. If it is 0:00 the watch will display 24:00 to make sure
0:00 is not confused with a broken watch.
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">3.4.2   </span> <a 
 id="x1-330003.4.2"></a>set the time</h5>
<!--l. 35--><p class="noindent" >To set the time first of all the display has to be activated, afterwards the watchface needs to be
turned down and double tapping the Housing. If the First step was succesful the two LEDs H80 and
M80 will light up together. To enter the set hour mode the watchface needs to be turned up again and
the watch needs to be double tapped again.
</p><!--l. 38--><p class="indent" >   Now the LED M80 will be turned off.
</p><!--l. 40--><p class="indent" >   To change the Value the watch needs to be tilted up to increase the value or tilted down to
decrease the value, to switch to set minute mode the watch needs to be double tapped again.
Changing the minutes works exactly like changing hours. To finish the setup process double tap the
cloak again. Now the second counter will also start with zero, so it is possible to set the time
precisely.
                                                                                            
                                                                                            
</p>
    
</body></html> 

                                                                                            


